<div class="flex flex-row justify-start mb-2">
  <div class="w-8 h-8 relative flex flex-shrink-0 mr-4">
    <%= image_tag message.user.avatar, class: "shadow-md rounded-full w-full h-full object-cover #{hidden_avatar ? 'hidden' : ''}" %>
  </div>
  <div class="messages text-sm text-gray-700 grid grid-flow-row gap-2">
    <div class="flex items-center group">
      <% attachment_type = reply_type_mapping_attachment(attachment) %>
      <div class="flex flex-col flex-shrink-0 items-start">
        <% parent = message.parent %>
        <% if parent.present? && message.body.blank? %>
          <%= render partial: 'chat/content/receiver/message_reply', locals: { attachment: message.reply_attachment, parent: parent } %>
        <% end %>

        <%= render partial: 'chat/content/concerns/message_attachment', locals: { attachment: attachment, attachment_type: attachment_type } %>
      </div>
      <%= render partial: 'chat/content/receiver/message_actions', locals: {
        message: message,
        message_reply_type: attachment_type,
        message_reply_content: reply_content_mapping_reply_type(attachment, message),
        attachment_id: attachment.id
      } %>
    </div>
  </div>
</div>
